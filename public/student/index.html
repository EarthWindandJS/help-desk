<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
    <title>Project X HRequests(Work in Progress)</title>
    <!-- <link rel="stylesheet" href="./styles.css" /> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.6.15/browser.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.2/marked.min.js"></script>
</head>
<body>
<div id="content"></div>
<script type="text/babel">
  var HelpRequestTab = React.createClass({
    render: function() {
      return (
      <div className="help">
      <SubmitTags />

      <form className="request-form">
        <input type="text" placeholder="Input your question here"/>
        <input type="submit"  value="Submit Help Request"/>
      </form>
      </div>
      );
    } 
  });

  var SubmitTags = React.createClass({
    // getDefaultProps: function () {
    //   return {
    //     submittedTags: []
    //   };
    // },

    getInitialState: function() {
      return {
        inputData: []
      };
    },

    handleSubmit: function (event) {
      event.preventDefault();
      console.log('pushing');

      this.state.inputData.push({key:this.refs.tag.value.trim(), text: this.refs.tag.value.trim()})

      this.setState({
        inputData: this.state.inputData
      });

      console.log(this.state.inputData)
      this.refs.tag.value = '';
    },

    render: function () {
      return (
      <div className='submit-tags'>
      <form className="submit-tag" autoComplete="on" onSubmit={this.handleSubmit} >
        <input size="50%" height="200" type="text" placeholder="Enter tags" ref="tag"/>
        <input type="submit" value="Add Tags"/>
      </form> 
      <RenderTags data={this.state.inputData} />
      </div>
      );
    }
  });

  var RenderTags = React.createClass({
    render: function () {
      var tagNodes = this.props.data.map(function(tag){
        return (
          <div key={tag.id}>{tag.text}</div>
          );
      })
      return (
      <div className="taglist">{tagNodes}</div>
      );
    }
  });

  // var SendRequest = React.createClass({
  //   render: function () {
  //     return ( <div></div> );
  //   }
  // });

  ReactDOM.render(
    <HelpRequestTab />, document.getElementById('content')
  );
</script>
</body>
</html>